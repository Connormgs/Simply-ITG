<ActorFrame> <children>
	<ActorFrame Command="queuecommand,Icon" IconCommand="%function() StyleIcon() end" />
	<ActorFrame Command="%function() if GAMESTATE:GetCoinMode() == 1 and not GetPref('EventMode') then rateMods = rateModsPay else rateMods = rateModsFree end end" />
		<Layer
		Class="AutoActor" 
		File="../ScreenWithMenuElements underlay/back"
		InitCommand="%function(self) self:diffuse(ColorRGB(1)) end" ColorSelectedMessageCommand="%function(self) self:linear(.5) self:diffuse(ColorRGB(1)) end" 

	/>

	<Layer
		Class="AutoActor" 
		File="../ScreenWithMenuElements underlay/fore"
		InitCommand="%function(self) self:diffuse(ColorRGB(1)) end" ColorSelectedMessageCommand="%function(self) self:linear(.5) self:diffuse(ColorRGB(1)) end" 
	/>
	<ActorFrame InitCommand="%SelectMusicInit" FirstUpdateCommand="%SelectMusic" CaptureCommand="%SongInfo" CurrentSongChangedMessageCommand="queuecommand,Capture" CurrentStepsP1ChangedMessageCommand="queuecommand,Capture" CurrentStepsP2ChangedMessageCommand="queuecommand,Capture" />
		<!-- rpc shenanigans -->
	<Layer
		Type="Quad"
		InitCommand="%function(self)
			self:hidden(1)
			oat_RPC:set('state', 'Menu')
			oat_RPC:set('browsingsince', os.time())

			self:queuecommand('Update')
		end"
		UpdateCommand="%function(self)
			local song = GAMESTATE:GetCurrentSong()
			if song then
				oat_RPC:set('pack', song:GetGroupName())
			else
				oat_RPC:set('pack', '')
			end
			oat_RPC:update()

			self:sleep(3)
			self:queuecommand('Update')
		end"
	/>
</children> </ActorFrame>